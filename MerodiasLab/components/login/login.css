/* Accesibilidad */
.sr-only {
  position: absolute !important;
  width: 1px; height: 1px;
  padding: 0; margin: -1px;
  overflow: hidden; clip: rect(0,0,0,0);
  white-space: nowrap; border: 0;
}

:root { --vh: 100dvh; }
@supports (height: 100svh) { :root { --vh: 100svh; } }

/* Modal  */
.lgn-modal[hidden] { display: none !important; }
.lgn-modal {
  position: fixed; inset: 0; z-index: 13000;
  display: flex; align-items: center; justify-content: center;
  min-height: var(--vh); padding: clamp(.5rem, 1.5vw, 1rem);
  opacity: 0; visibility: hidden;
  transition: opacity .25s ease, visibility .25s ease;
  overscroll-behavior: contain;
}
.lgn-modal[data-open="true"] { opacity: 1; visibility: visible; }

.lgn-backdrop {
  position: absolute; inset: 0;
  background: rgba(15, 23, 42, 0.70);
  backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);
  cursor: pointer;
}

/* ===== Dialog ===== */
.lgn-dialog {
  position: relative; z-index: 1; border: none;
  background: #fff; color: #0f172a; border-radius: 20px;
  box-shadow: 0 20px 60px rgba(0,0,0,.20);
  width: min(900px, 96vw);
  max-height: min(calc(var(--vh) - 1rem), 900px);
  overflow: hidden; transform: translateY(8px) scale(.98); opacity: 0;
  transition: transform .35s cubic-bezier(.34,1.56,.64,1), opacity .25s ease;
}
.lgn-modal[data-open="true"] .lgn-dialog { transform: translateY(0) scale(1); opacity: 1; }

.lgn-close {
  position: absolute; top: .9rem; right: .9rem;
  width: 2.5rem; height: 2.5rem; display: grid; place-items: center;
  border: none; background: #fee2e2; color: #dc2626;
  cursor: pointer; border-radius: 10px;
  transition: background .2s ease, color .2s ease, transform .06s ease;
  -webkit-tap-highlight-color: transparent; touch-action: manipulation;
}
.lgn-close:hover { background: #ef4444; color: #fff; }
.lgn-close:active { transform: scale(.96); }

/* ===== Layout ===== */
.lgn-content { display: grid; grid-template-columns: 1fr 1.25fr; min-height: 480px; }

/* Izquierda (branding) */
.lgn-left {
  position: relative; color: #fff;
  padding: clamp(1.25rem, 3vw, 2.5rem) clamp(1rem, 3vw, 2rem);
  background:
    radial-gradient(1200px 500px at 0% 0%, rgba(255,255,255,.10), transparent 60%),
    linear-gradient(135deg, #125aac 0%, #2a8bcc 100%);
  display: flex; flex-direction: column; align-items: center; justify-content: center;
}
/* Imagen opcional (usar .lgn-left--img y --lgn-image) */
.lgn-left--img::before {
  content: ""; position: absolute; inset: 0; z-index: 0;
  background: center 40% / cover no-repeat var(--lgn-image, none);
  opacity: .22; mix-blend-mode: overlay;
}
.lgn-left > * { position: relative; z-index: 1; }
.lgn-left::after {
  content: ""; position: absolute; inset: 0; pointer-events: none;
  background:
    radial-gradient(circle at 20% 40%, rgba(255,255,255,.10) 0 45%, transparent 46%),
    radial-gradient(circle at 80% 70%, rgba(255,255,255,.10) 0 45%, transparent 46%);
}

.lgn-avatar {
  width: clamp(3rem, 7vw, 5rem); height: clamp(3rem, 7vw, 5rem);
  margin-bottom: clamp(.6rem, 2vw, 1rem);
  display: grid; place-items: center; border-radius: 50%;
  border: 3px solid rgba(255,255,255,.35);
  background: rgba(255,255,255,.18); backdrop-filter: blur(8px);
}
.lgn-avatar svg { width: 60%; height: 60%; }

.lgn-title {
  font-size: clamp(1.2rem, 2vw, 1.7rem);
  font-weight: 800; letter-spacing: -.02em; margin: .2rem 0 .45rem;
  text-align: center;
}
.lgn-subtitle {
  font-size: clamp(.86rem, 1.1vw, .98rem);
  line-height: 1.5; opacity: .95; max-width: 34ch; margin: 0; text-align: center;
}

/* Derecha (formularios) */
.lgn-right { padding: clamp(1rem, 3vw, 2rem); display: flex; align-items: center; overflow: auto; }
.lgn-form { width: 100%; display: flex; flex-direction: column; gap: clamp(.85rem, 1.3vw, 1.15rem); }
.lgn-field { display: flex; flex-direction: column; gap: .45rem; }
.lgn-row { display: flex; align-items: baseline; justify-content: space-between; gap: .5rem; flex-wrap: wrap; }
.lgn-field label { 
  font-size: clamp(.84rem, .95vw, .92rem); 
  font-weight: 700; 
  color: #0f172a; 
  margin-bottom: 0.15rem;
}

/* ===== Inputs / estados ===== */
.lgn-input {
  width: 100%; padding: clamp(.65rem, 1.5vw, .9rem) clamp(.8rem, 2vw, 1rem);
  border: 2px solid #e5e7eb; border-radius: 12px;
  font-size: clamp(.9rem, .98vw, .98rem); color: #0f172a; background: #fff;
  transition: border-color .15s ease, box-shadow .15s ease, background .15s ease;
  font-family: inherit;
}
.lgn-input::placeholder { 
  color: #94a3b8; 
  opacity: 0.7;
}
.lgn-input:focus {
  outline: none; 
  border-color: #2563eb; 
  background: #f6fbff;
  box-shadow: 0 0 0 4px rgba(37, 99, 235, .10);
}
.lgn-input.is-invalid { 
  border-color: #ef4444; 
  box-shadow: 0 0 0 4px rgba(239, 68, 68, .12); 
}
.lgn-help { 
  min-height: 1em; 
  font-size: .8rem; 
  color: #ef4444; 
}

/* Check / botones / links */
.lgn-remember { margin-top: .25rem; margin-bottom: 0.25rem; }
.lgn-check { 
  display: inline-flex; 
  align-items: center; 
  gap: .5rem; 
  font-size: .9rem; 
  color: #334155; 
}
.lgn-check input { 
  width: 1rem; 
  height: 1rem; 
  cursor: pointer;
}

.lgn-btn {
  width: 100%; 
  padding: clamp(.8rem, 1.8vw, 1rem) clamp(1rem, 2.2vw, 1.25rem);
  background: linear-gradient(135deg, #125aac 0%, #2a8bcc 100%);
  color: #fff; 
  border: none; 
  border-radius: 12px;
  font-size: clamp(.93rem, 1.05vw, 1rem); 
  font-weight: 700; 
  cursor: pointer;
  transition: transform .08s ease, filter .2s ease, box-shadow .2s ease;
  box-shadow: 0 4px 14px rgba(18, 90, 172, .25); 
  touch-action: manipulation;
  margin-top: 0.35rem;
}
.lgn-btn:hover {
  background: linear-gradient(135deg, #0f4d8a 0%, #125aac 100%);
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(18, 90, 172, .35);
}
.lgn-btn:active { transform: translateY(0); }

.lgn-forgot { 
  color: #64748b; 
  text-decoration: none; 
  font-size: clamp(.8rem, .95vw, .9rem); 
}
.lgn-forgot:hover { 
  color: #2563eb; 
  text-decoration: underline; 
}

.lgn-alt { 
  text-align: center;
  margin-top: 0.75rem;
  font-size: 0.9rem;
  color: #64748b;
  line-height: 1.6;
}
.lgn-alt a {
  color: #2563eb;
  text-decoration: none;
  font-weight: 600;
  transition: color 0.2s ease;
}
.lgn-alt a:hover {
  color: #1d4ed8;
  text-decoration: underline;
}

.lgn-secondary {
  display: inline-block; 
  padding: .7rem .9rem; 
  background: #f8fafc; 
  color: #0f172a;
  border: 1px solid #e5e7eb; 
  border-radius: 10px; 
  font-weight: 700; 
  text-decoration: none;
  transition: background .2s ease, transform .08s ease, box-shadow .2s ease;
}
.lgn-secondary:hover { 
  background: #f1f5f9; 
  box-shadow: 0 6px 16px rgba(0,0,0,.06); 
  transform: translateY(-1px); 
}

/* ===== Responsive ===== */
@media (max-width: 1024px) {
  .lgn-dialog { width: min(760px, 96vw); }
  .lgn-content { grid-template-columns: 1fr 1.1fr; }
}

@media (max-width: 820px) {
  .lgn-dialog { 
    width: min(560px, 96vw); 
    max-height: calc(var(--vh) - 1rem); 
    border-radius: 16px; 
  }
  .lgn-content { 
    grid-template-columns: 1fr; 
    min-height: auto; 
  }
  .lgn-left { 
    padding: 1.25rem 1rem; 
    min-height: 110px; 
  }
  .lgn-right { 
    padding: 1.5rem 1.25rem; 
    overflow: auto; 
  }
}

@media (max-width: 600px) {
  .lgn-modal {
    align-items: center;
    padding-top: max(.5rem, env(safe-area-inset-top));
    padding-bottom: max(.5rem, env(safe-area-inset-bottom));
  }
  .lgn-dialog { 
    margin-top: 0; 
    max-height: calc(100dvh - 1rem); 
  }
  .lgn-left { min-height: 96px; }
  .lgn-form { gap: .85rem; }
  .lgn-input, .lgn-btn { border-radius: 10px; }
}

/* Muy pequeño */
@media (max-width: 360px), (max-height: 640px) {
  .lgn-modal { padding: .4rem; align-items: center; }
  .lgn-dialog { 
    width: 96vw; 
    border-radius: 12px; 
    margin-top: 0; 
    max-height: calc(100dvh - .8rem); 
  }
  .lgn-left { min-height: 72px; padding: .75rem; }
  .lgn-avatar, .lgn-subtitle { display: none; }
  .lgn-title { font-size: 1.05rem; margin: 0; }
  .lgn-right { padding: 1rem .9rem; }
  .lgn-form { gap: .75rem; }
  .lgn-field { gap: .4rem; }
  .lgn-field label { font-size: .82rem; }
  .lgn-input { 
    padding: .6rem .75rem; 
    font-size: .9rem; 
    border-radius: 10px; 
  }
  .lgn-btn { 
    padding: .72rem .9rem; 
    font-size: .9rem; 
    border-radius: 10px; 
  }
  .lgn-check { font-size: .85rem; }
  .lgn-secondary { padding: .65rem .8rem; font-size: .9rem; }
  .lgn-close { 
    top: .6rem; 
    right: .6rem; 
    width: 2rem; 
    height: 2rem; 
    border-radius: 8px; 
  }
}

/* Altura muy baja (teclado móvil) */
@media (max-height: 560px) {
  .lgn-modal { align-items: flex-start; }
  .lgn-dialog { 
    margin-top: .4rem; 
    max-height: calc(var(--vh) - .6rem); 
  }
  .lgn-left { display: none; }
  .lgn-content { grid-template-columns: 1fr; }
  .lgn-right { padding: .85rem; }
}

@supports (padding: max(0px)) {
  .lgn-modal {
    padding-top: max(.4rem, env(safe-area-inset-top));
    padding-bottom: max(.4rem, env(safe-area-inset-bottom));
  }
}

/* Accesibilidad motion */
@media (prefers-reduced-motion: reduce) {
  .lgn-modal, .lgn-dialog { transition: none; }
}

/* ===== Ojo mostrar/ocultar ===== */
.lgn-passwrap { position: relative; }
.lgn-passwrap .lgn-input { padding-right: 2.75rem; }
.lgn-eye {
  position: absolute; 
  inset-inline-end: .55rem; 
  top: 50%;
  transform: translateY(-50%); 
  width: 2rem; 
  height: 2rem;
  display: grid; 
  place-items: center; 
  border: none; 
  background: transparent;
  color: #64748b; 
  cursor: pointer; 
  border-radius: 8px; 
  -webkit-tap-highlight-color: transparent;
  transition: background 0.2s ease, color 0.2s ease;
}
.lgn-eye:hover { 
  background: #f1f5f9; 
  color: #0f172a; 
}
.lgn-eye:focus-visible { 
  outline: none; 
  box-shadow: 0 0 0 4px rgba(37,99,235,.18); 
}
.lgn-eye .icon-eye-off { display: none; }
.lgn-eye[aria-pressed="true"] .icon-eye-open { display: none; }
.lgn-eye[aria-pressed="true"] .icon-eye-off { display: inline; }

/* ===== Registro (#regForm) ===== */
#regForm { 
  display: grid; 
  grid-template-columns: 1fr; 
  gap: .85rem; 
}

@media (max-width: 600px) {
  #regForm { gap: .75rem; }
  #regForm .lgn-field { gap: .4rem; }
  #regForm .lgn-field label { font-size: .82rem; }
  #regForm .lgn-input { 
    padding: .6rem .75rem; 
    font-size: .9rem; 
    border-radius: 10px; 
  }
  #regForm .lgn-btn { 
    padding: .72rem 1rem; 
    font-size: .92rem; 
    border-radius: 10px; 
  }
  #regForm .lgn-alt { margin-top: .5rem; }
}

#regForm .lgn-field + .lgn-btn { margin-top: .5rem; }

@media (max-width: 600px) { 
  #regForm .lgn-field + .lgn-btn { margin-top: .65rem; } 
}

@media (min-width: 700px) {
  #regForm { 
    grid-template-columns: 1fr 1fr; 
    column-gap: 1rem; 
    row-gap: .9rem; 
  }
  #regForm .lgn-field { margin: 0; }
  #regForm .lgn-btn, #regForm .lgn-alt { grid-column: 1 / -1; }
}

@media (max-width: 360px), (max-height: 640px) {
  #regForm .lgn-input { 
    padding: .55rem .7rem; 
    font-size: .88rem; 
  }
  #regForm .lgn-btn { 
    padding: .68rem .9rem; 
    font-size: .88rem; 
  }
}

/* ===== Navbar fijo (ajuste de altura) ===== */
:root { --nav-h: 64px; }

@media (max-width: 820px) {
  .lgn-modal {
    align-items: center; 
    justify-content: center;
    padding-top: max(calc(var(--nav-h) + .5rem), env(safe-area-inset-top));
    padding-bottom: max(.5rem, env(safe-area-inset-bottom));
  }
  .lgn-dialog {
    display: flex; 
    flex-direction: column; 
    justify-content: center; 
    margin: 0 auto;
    max-height: calc(100dvh - var(--nav-h) - 1rem); 
    width: min(560px, 95vw); 
    border-radius: 16px;
  }
  .lgn-content { 
    display: flex; 
    flex-direction: column; 
    flex: 1; 
    min-height: unset; 
    max-height: inherit; 
  }
  .lgn-left {
    flex: 0 0 180px; 
    position: relative; 
    overflow: hidden;
    background: linear-gradient(135deg, #125aac 0%, #2a8bcc 100%);
  }
  .lgn-left.lgn-left--img::before {
    content: ""; 
    position: absolute; 
    inset: 0;
    background: center / cover no-repeat var(--lgn-image, none);
    opacity: .25; 
    background-position: center top; 
    background-size: contain;
  }
  .lgn-right { 
    flex: 1; 
    padding: 1.25rem 1.25rem 1.5rem; 
    overflow-y: auto; 
  }
  #regForm { 
    max-height: calc(100dvh - var(--nav-h) - 2rem - 180px); 
    overflow-y: auto; 
  }
}

/* Compacto extremo */
@media (max-width: 400px), (max-height: 640px) {
  .lgn-left { display: none; }
  .lgn-content { flex-direction: column; }
  .lgn-dialog { 
    width: 92vw; 
    max-height: calc(100dvh - var(--nav-h) - .5rem); 
  }
  .lgn-right { 
    padding: 1rem .8rem; 
    overflow-y: auto; 
  }
  .lgn-form { gap: .7rem; }
  .lgn-input { 
    padding: .6rem .75rem; 
    font-size: .9rem; 
  }
  .lgn-btn { 
    padding: .7rem .85rem; 
    font-size: .9rem; 
  }
}

/* ===== Toast reutilizable (compartido con contacto) ===== */
.c-toast {
  position: fixed; 
  left: 50%; 
  top: 50%;
  transform: translate(-50%, -50%);
  padding: 1.1rem 1.5rem; 
  border-radius: 14px; 
  font-weight: 600; 
  font-size: 1.05rem; 
  color: #0f172a;
  background: #fff; 
  border: 2px solid #e5e7eb;
  box-shadow: 0 15px 40px rgba(0,0,0,.2);
  opacity: 0; 
  pointer-events: none;
  transition: opacity .2s ease, transform .2s ease;
  max-width: min(90vw, 520px);
  min-width: 320px;
  z-index: 30001; 
  display: flex; 
  gap: .9rem; 
  align-items: center;
}
.c-toast[data-show="true"] { 
  opacity: 1; 
  pointer-events: auto;
  transform: translate(-50%, -50%) scale(1);
}
.c-toast--ok { 
  background: #d1fae5; 
  color: #065f46; 
  border-color: rgba(16,185,129,.3);
}
.c-toast--err { 
  background: #fee2e2; 
  color: #991b1b; 
  border-color: rgba(239,68,68,.3);
}
.c-toast--info { 
  background: #dbeafe; 
  color: #1e40af; 
  border-color: rgba(37,99,235,.3);
}
.c-toast--warn {
  background: #fef3c7;
  color: #92400e;
  border-color: rgba(245,158,11,.3);
}
.c-toast__close {
  margin-left: auto; 
  background: rgba(0,0,0,.05); 
  border: none; 
  color: currentColor; 
  opacity: .7; 
  cursor: pointer;
  font-size: 1.25rem; 
  line-height: 1; 
  width: 2rem; 
  height: 2rem; 
  border-radius: 6px;
  transition: all 0.2s ease;
  flex-shrink: 0;
}
.c-toast__close:hover { 
  background: rgba(0,0,0,.1); 
  opacity: 1;
}

/* Responsive toast */
@media (max-width: 640px) {
  .c-toast {
    padding: .9rem 1.1rem;
    font-size: .95rem;
    min-width: auto;
    max-width: min(90vw, 400px);
  }
  .c-toast__close {
    font-size: 1.1rem;
    width: 1.75rem;
    height: 1.75rem;
  }
}

/* ===== Feedback botón (shake/error) ===== */
@keyframes c-shake {
  0% { transform: translateX(0) }
  20% { transform: translateX(-6px) }
  40% { transform: translateX(6px) }
  60% { transform: translateX(-4px) }
  80% { transform: translateX(4px) }
  100% { transform: translateX(0) }
}
.c-btn.is-shake { animation: c-shake .32s ease-in-out; }
.c-btn.is-error {
  background: linear-gradient(135deg, #b91c1c 0%, #ef4444 100%) !important;
  box-shadow: 0 4px 14px rgba(239,68,68,.35) !important;
}

/* ===== Ocultar ayudas por campo en el modal ===== */
#loginModal .lgn-help { display: none !important; }